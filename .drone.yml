---
kind: pipeline
type: docker
name: buy
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: racknerd
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7
      - node freeok_buy.js
trigger:
  event:
  - cron
  cron:
  - buy
---
kind: pipeline
type: docker
name: sign
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: racknerd
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7
      - node freeok_sign.js
trigger:
  event:
  - cron
  cron:
  - sign
---
kind: pipeline
type: docker
name: sign2
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: desivps
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7
      - node freeok_sign2.js
trigger:
  event:
  - cron
  cron:
  - sign2
---
kind: pipeline
type: docker
name: invite
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: desivps
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7  
      - node freeok_invite.js
trigger:
  event:
  - cron
  cron:
  - invite
---
kind: pipeline
type: docker
name: reset_day
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: racknerd
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7
      - node reset_day.js
      - node v2raya_day.js
      #- node freeok_regAuto.js
trigger:
  event:
  - cron
  cron:
  - reset_day
---
kind: pipeline
type: docker
name: reset_month
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: racknerd
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7
      - node freeok_sign2.js
      - node reset_month.js
      - node v2raya_month.js
trigger:
  event:
  - cron
  cron:
  - reset_month
---
kind: pipeline
type: docker
name: reset_year
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: racknerd
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7
      - node reset_year.js
      - node reset_halfyear.js
      - node v2raya_year.js
      - node sq_reset.js

trigger:
  event:
  - cron
  cron:
  - reset_year
---
kind: pipeline
type: docker
name: daily-racknerd
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: racknerd
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7    
      #- node ssrsub_sign.js
      #- node ssrsub_reg6.js  
      - node freeok_regAuto.js
      - node v2raya_free.js

trigger:
  event:
  - cron
  cron:
  - daily-racknerd
---
kind: pipeline
type: docker
name: daily-desivps
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: desivps
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7    
      #- node ssrsub_sign.js
      #- node ssrsub_reg6.js  
      - node freeok_regAuto.js

trigger:
  event:
  - cron
  cron:
  - daily-desivps
---
kind: pipeline
type: docker
name: daily-regxa
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: regxa
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7    
      #- node ssrsub_sign.js
      #- node ssrsub_reg6.js  
      - node freeok_regAuto.js

trigger:
  event:
  - cron
  cron:
  - daily-regxa
---
kind: pipeline
type: docker
name: daily-hp
volumes: # 声明数据卷（此为服务器中的实际目录）
  - name: node_modules # 数据卷名称
    host: # Host Volume
      path: /home/drone/freeok/node_modules # 宿主机目录    #绝对路径
node:
  a: hp
  c: d
steps: # 定义管道的执行步骤
  - name: deploy # 步骤名称
    image: aiboboxx/node:latest # 当前步骤使用的镜像
    depends_on: [clone] # 依赖的步骤
    volumes: # 挂载数据卷（此为容器内的目录）
      - name: node_modules # 数据卷名称
        path: /drone/src/node_modules # 容器内目录 绝对路径
    commands: # 当前步骤执行的命令
      - export runId=123456
      - pwd # 查看当前目录
      - npm install # 安装node_modules包
      #- ls
      - Xvfb -ac :7 -screen 0 1280x1024x8 &
      - export DISPLAY=:7    
      #- node ssrsub_sign.js
      #- node ssrsub_reg6.js  
      - node freeok_regAuto.js

trigger:
  event:
  - cron
  cron:
  - daily-hp